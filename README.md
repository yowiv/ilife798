# 慧生活798 签到脚本

适配青龙面板的自动签到脚本，支持多账号、卡密验证。

---

## 环境变量

| 变量名 | 必填 | 说明 |
|--------|------|------|
| HUI798_TOKEN | 是 | 登录 token，多账号用 `&` 或 `@` 或 换行 分隔 |
| HUI798_KEY | 是 | 卡密，用于验证 |

---

## 定时任务

```
cron: 0 8 * * *
```

每天早上 8:00 执行一次。

---

## 功能说明

### 1. 每日签到

自动完成每日签到任务，获取对应积分。

### 2. 广告任务

自动执行广告任务，包括：
- 看视频赚积分
- 浏览广告赚积分
- 其他动态配置的任务

### 3. 多账号支持

支持多种分隔符：
- `&` - 青龙面板默认分隔符
- `@` - 可选分隔符
- 换行 - 可选分隔符

示例：
```
token1&token2&token3
```
或
```
token1
token2
token3
```

### 4. 卡密验证

签名服务需配置卡密才能使用。卡密相关错误会自动停止脚本执行。

---

## 获取 Token

1. 打开慧生活798 APP 或 电脑微信小程序
2. 使用抓包工具（如 reqable）
3. 抓取请求头中的 `authorization` 字段
4. 将该值设置为 HUI798_TOKEN 环境变量

---

## 青龙面板配置

### 添加环境变量

1. 进入青龙面板 -> 环境变量
2. 新建变量：
   - 名称：`HUI798_TOKEN`
   - 值：你的 token（多账号用分隔符连接）
3. 卡密，新建：
   - 名称：`HUI798_KEY`
   - 值：你的卡密

### 添加定时任务

1. 进入青龙面板 -> 定时任务
2. 新建任务：
   - 名称：慧生活798
   - 命令：`task hui798_ql.py`
   - 定时：`0 8 * * *`

---

## 运行日志示例

每日最高可获得 315 积分。

```
[08:00:01] ========================================
[08:00:01] 慧生活798 签到任务
[08:00:01] ========================================
[08:00:01] 执行时间: 2026-01-19 08:00:01
[08:00:01] [*] 共 2 个账号

[08:00:02] ========== 账号 1 ==========
[08:00:02] [*] 账号: 用户昵称 (138****1234)
[08:00:02] [*] UID: 123456
[08:00:02] [*] 当前积分: 1500, 累计积分: 8000

[08:00:03] [*] 执行每日签到...
[08:00:03] [+] 签到成功, 获得 5 积分

[08:00:04] [*] 看视频赚积分 (5次, 20积分/次)
[08:00:04]     [1/5] 成功, +20 积分
[08:00:09]     [2/5] 成功, +20 积分
...

[08:01:00] [*] 全部完成: 成功 16/16
[08:01:01] [*] 今日获得: 315 积分

[08:01:03] ========================================
[08:01:03] 执行汇总
[08:01:03] ========================================
[08:01:03] [*] 成功账号: 2/2

[08:01:03] [*] 慧生活798 执行完成
```

---

## 错误处理

| 错误信息 | 说明 | 解决方案 |
|----------|------|----------|
| Token 已过期 | authorization 失效 | 重新抓包获取新 token |
| 卡密验证失败: 卡密无效或已禁用 | 卡密不存在或被禁用 | 检查卡密是否正确 |
| 卡密验证失败: 卡密已过期 | 卡密有效期已到 | 续费或更换新卡密 |
| 卡密今日已绑定 X 个账号 | 达到每日绑定上限 | 等待次日或升级卡密 |
| 无法获取任务配置 | 签名服务不可用 | 检查签名服务是否正常 |
| UID 为空 | Token 无效 | 重新获取 token |

---

## 注意事项

1. Token 有效期有限，失效后需重新获取
2. 卡密验证失败会立即停止脚本，不会继续执行后续账号
3. 请求频繁时会自动重试（最多 3 次）
4. 多账号间隔 2 秒执行，避免请求过快

---
